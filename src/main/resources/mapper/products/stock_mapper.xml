<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ustore.products.dao.StockDao">




<select id="list" resultType="com.ustore.products.dto.StockDto">

	SELECT product_id,product_name,stock FROM products order by product_id asc;
	
</select>
<select id="stock_insert" resultType="String">


SELECT product_id
FROM products
WHERE product_id LIKE CONCAT(#{proNum}, '%')
ORDER BY product_id DESC
LIMIT 1;

</select>


<insert id="stock_insert2" parameterType="com.ustore.products.dto.StockDto">
INSERT
	INTO
	products (
    product_id,
	product_name,
	purchase_price,
	selling_price,
	unit_quantity,
	stock,
	category_id,
	point_enabled,
	reg_date,
	reg_by
)
VALUES (
    #{productId},
    #{productName},
    #{purchasePrice},
    #{sellingPrice},
    #{unitQuantity},
    0,
#{categoryId},
    CASE
	WHEN category_id = '1' THEN 'N'
	ELSE 'Y'
END,
    NOW(),
    12);
</insert>



</mapper>